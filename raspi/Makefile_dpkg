# Makefile for cross compiling of Ugglan for target
# (Raspberry Pi Zero) and creating a Debian package.
#

RASPI_ROOT = /$(shell pwd)/
RASPI_ROOT_MOUNTED = /raspi_mount

.PHONY: build_dpkg_in_docker

build_dpkg_in_docker:
	docker build -f Dockerfile_raspi . -t raspi
	#docker buildx build -f Dockerfile_raspi --no-cache --network=host . -t raspi
	docker create -ti --name raspi_dpkg raspi bash
	docker cp raspi_dpkg:/raspi/ugglan.deb .
	docker rm -f raspi_dpkg
